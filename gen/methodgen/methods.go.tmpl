package {{.Package}}

{{template "header" .}}
{{range $method := .Methods}}
// {{$method.CallTypeName}} represents a call to the [{{$method.APIName}}] method.
{{- if $method.Comment}}
// {{$method.Comment}}
{{- end}}
//
// [{{$method.APIName}}]: {{$method.APIDocURL}}
type {{$method.CallTypeName}} struct {
	{{$method.EmbedType}}
}
{{range $ctor := $method.Constructors}}
// New{{$method.GoName}}{{$ctor.Suffix}}Call constructs a new [{{$method.CallTypeName}}].
{{- if $ctor.RequiredParams}}
//
// Required params:
{{- range $ctor.RequiredParams}}
//   - {{.GoArgName}}: {{.Description}}
{{- end}}
{{- end}}
{{- if $ctor.LinkDefs}}
//
{{- range $ctor.LinkDefs}}
// {{.}}
{{- end}}
{{- end}}
func New{{$method.GoName}}{{$ctor.Suffix}}Call({{range $i, $p := $ctor.RequiredParams}}{{if $i}}, {{end}}{{$p.GoArgName}} {{if $p.Variadic}}...{{end}}{{$p.GoType}}{{end}}) *{{$method.CallTypeName}} {
	return &{{$method.CallTypeName}}{
		{{$method.EmbedType}}{
			request: NewRequest("{{$method.APIName}}"){{if $ctor.RequiredParams}}.{{end}}
{{- range $i, $p := $ctor.RequiredParams}}
				{{$p.RequestMethod}}("{{$p.Name}}", {{if $p.Variadic}}{{$p.ClassConvert}}({{$p.GoArgName}}...){{else if $p.ClassConvert}}{{$p.GoArgName}}.{{$p.ClassConvert}}(){{else}}{{$p.GoArgName}}{{end}}){{if last $i $ctor.RequiredParams}}{{else}}.{{end}}
{{- end}},
		},
	}
}

// {{$method.GoName}}{{$ctor.Suffix}} constructs a new [{{$method.CallTypeName}}].
{{- if $ctor.RequiredParams}}
//
// Required params:
{{- range $ctor.RequiredParams}}
//   - {{.GoArgName}}: {{.Description}}
{{- end}}
{{- end}}
{{- if $ctor.LinkDefs}}
//
{{- range $ctor.LinkDefs}}
// {{.}}
{{- end}}
{{- end}}
func (client *Client) {{$method.GoName}}{{$ctor.Suffix}}({{range $i, $p := $ctor.RequiredParams}}{{if $i}}, {{end}}{{$p.GoArgName}} {{if $p.Variadic}}...{{end}}{{$p.GoType}}{{end}}) *{{$method.CallTypeName}} {
	return BindClient(
		New{{$method.GoName}}{{$ctor.Suffix}}Call({{range $i, $p := $ctor.RequiredParams}}{{if $i}}, {{end}}{{$p.GoArgName}}{{if $p.Variadic}}...{{end}}{{end}}),
		client,
	)
}
{{end}}{{range $method.Params}}
// {{.GoName}} sets the {{.Name}} parameter.
func (call *{{$method.CallTypeName}}) {{.GoName}}({{.GoArgName}} {{if .Variadic}}...{{end}}{{.GoType}}) *{{$method.CallTypeName}} {
	call.request.{{.RequestMethod}}("{{.Name}}", {{if .Variadic}}{{.ClassConvert}}({{.GoArgName}}...){{else if .ClassConvert}}{{.GoArgName}}.{{.ClassConvert}}(){{else}}{{.GoArgName}}{{end}})
	return call
}
{{end}}{{end}}
