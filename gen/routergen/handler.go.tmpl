package {{.Package}}

{{template "header" .}}

import (
	"context"

	"github.com/mr-linch/go-tg"
)
{{range .HandlerTypes}}
// {{.HandlerName}} it's typed handler for [{{.WrapperName}}].
// Implements [Handler] interface.
type {{.HandlerName}} func(context.Context, *{{.WrapperName}}) error
{{if .MultiField}}
func (handler {{.HandlerName}}) Handle(ctx context.Context, update *Update) error {
	var v *{{.EmbedType}}
	switch {
	{{range .Fields}}case update.{{.}} != nil:
		v = update.{{.}}
	{{end}}}
	if v != nil {
		return handler(ctx, &{{.WrapperName}}{
			{{.FieldName}}: v,
			BaseUpdate: BaseUpdate{Update: update, Client: update.Client},
		})
	}
	return nil
}
{{else}}
func (handler {{.HandlerName}}) Handle(ctx context.Context, update *Update) error {
	return handler(ctx, &{{.WrapperName}}{
		{{.FieldName}}: update.{{index .Fields 0}},
		BaseUpdate: BaseUpdate{Update: update, Client: update.Client},
	})
}
{{end}}{{end}}
